<div class="container" style="height: 100%;">
  <div class="card p-2" style="min-height: 600px;">
    <div *ngIf="customer.id !== undefined" class="pl-3 m-2">
      <i>{{customer.name}}</i>
      <div style="float: right;">
      <button (click)="clearCart()" class="btn btn-outline-danger btn-sm">clear</button>
      <button (click)="resetCart()" class="btn btn-outline-danger btn-sm">cancel</button>
      </div>
    </div>
    <ul class="list-group">

      <table class="table" *ngIf="customer.id !== undefined">
        <thead>
          <tr>
            <th scope="col">Product</th>
            <th scope="col">Unit price</th>
            <th scope="col">Qty.</th>
            <th scope="col">Subtotal</th>
          </tr>
        </thead>
        <tbody *ngIf="orderDetails.length > 0">
          <tr *ngFor="let orderDetail of orderDetails">
            <td>{{orderDetail.product.name}}</td>
            <td>{{orderDetail.product.price | currency:'&#8377;'}}</td>
            <td>
              <button *ngIf="!togglePaymentOptions && !disableButtons" (click)="incrementProductQuantity(orderDetail)" class="btn btn-primary btn-sm">+</button>
              {{orderDetail.quantity}}
              <button *ngIf="!togglePaymentOptions && !disableButtons" (click)="decrementProductQuantity(orderDetail)" class="btn btn-primary btn-sm">-</button>
            </td>
            <td>{{orderDetail.quantity * orderDetail.product.price | currency:'&#8377;'}}</td>
          </tr>
        </tbody>
      </table>

      <li class="list-group-item">
        Subtotal
        <div style="float: right;">{{subtotal | currency:'&#8377;'}}</div>
      </li>
      <li class="list-group-item">
        Tax
        <div style="float: right;">{{tax | currency:'&#8377;'}}</div>
      </li>
      <li class="list-group-item">
        Grand Total
        <div style="float: right;">{{total | currency:'&#8377;'}}</div>
      </li>
    </ul>

    <button class="btn btn-primary form-control" style="margin-top: 100px;" *ngIf="!togglePaymentOptions" (click)="togglePaymentOptions=true">Checkout</button>


    <!-- To be displayed on click on checkout -->
    <div class="card p-2 m-2" *ngIf="togglePaymentOptions">
      <div class="form-inline">
        Payment Mode :
        <select class="form-control" #paymentMode>
          <option *ngFor="let mode of paymentModes" [value]="mode.value">{{mode.name}}</option>
        </select>
      </div>

      <div class="form-inline">
        <button *ngIf="!disableButtons" class="btn btn-secondary m-2" (click)="saveOrder(paymentMode.value)" data-toggle="modal" data-target="#saveOrderModal">Save Order</button>
        <button class="btn btn-primary m-2" (click)="placeOrder(paymentMode.value)" data-toggle="modal" data-target="#placeOrderModal" >Place Order</button>
      </div>
    </div>
  </div>
 
  <!-- Modal for place order -->
  <div class="modal" id="placeOrderModal">
    <div class="modal-dialog">
      <div class="modal-content">
  
        <!-- Modal body -->
        <div class="modal-body">
          <h3>{{placedOrder.totalAmount | currency:'&#8377;' }}</h3>
          <h6>Order has been created successfully</h6>
          <h6>Order Id : #{{placedOrder.id}}</h6>
        </div>
  
        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
        </div>
  
      </div>
    </div>
  </div>

  
  <!-- Modal for save order -->
  <div class="modal" id="saveOrderModal">
      <div class="modal-dialog">
        <div class="modal-content">
    
          <!-- Modal body -->
          <div class="modal-body">
            <h3>{{savedOrder.totalAmount | currency:'&#8377;' }}</h3>
            <h6>Order has been saved successfully</h6>
          </div>
    
          <!-- Modal footer -->
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
          </div>
    
        </div>
      </div>
    </div>

</div>
